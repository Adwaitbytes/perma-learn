{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst ar_1 = require(\"./ar\");\nconst api_1 = require(\"./lib/api\");\nconst node_driver_1 = require(\"./lib/crypto/webcrypto-driver\");\nconst network_1 = require(\"./network\");\nconst transactions_1 = require(\"./transactions\");\nconst wallets_1 = require(\"./wallets\");\nconst transaction_1 = require(\"./lib/transaction\");\nconst ArweaveUtils = require(\"./lib/utils\");\nconst silo_1 = require(\"./silo\");\nconst chunks_1 = require(\"./chunks\");\nconst blocks_1 = require(\"./blocks\");\nclass Arweave {\n  api;\n  wallets;\n  transactions;\n  network;\n  blocks;\n  ar;\n  silo;\n  chunks;\n  static init;\n  static crypto = new node_driver_1.default();\n  static utils = ArweaveUtils;\n  constructor(apiConfig) {\n    this.api = new api_1.default(apiConfig);\n    this.wallets = new wallets_1.default(this.api, Arweave.crypto);\n    this.chunks = new chunks_1.default(this.api);\n    this.transactions = new transactions_1.default(this.api, Arweave.crypto, this.chunks);\n    this.silo = new silo_1.default(this.api, this.crypto, this.transactions);\n    this.network = new network_1.default(this.api);\n    this.blocks = new blocks_1.default(this.api, this.network);\n    this.ar = new ar_1.default();\n  }\n  /** @deprecated */\n  get crypto() {\n    return Arweave.crypto;\n  }\n  /** @deprecated */\n  get utils() {\n    return Arweave.utils;\n  }\n  getConfig() {\n    return {\n      api: this.api.getConfig(),\n      crypto: null\n    };\n  }\n  async createTransaction(attributes, jwk) {\n    const transaction = {};\n    Object.assign(transaction, attributes);\n    if (!attributes.data && !(attributes.target && attributes.quantity)) {\n      throw new Error(`A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.`);\n    }\n    if (attributes.owner == undefined) {\n      if (jwk && jwk !== \"use_wallet\") {\n        transaction.owner = jwk.n;\n      }\n    }\n    if (attributes.last_tx == undefined) {\n      transaction.last_tx = await this.transactions.getTransactionAnchor();\n    }\n    if (typeof attributes.data === \"string\") {\n      attributes.data = ArweaveUtils.stringToBuffer(attributes.data);\n    }\n    if (attributes.data instanceof ArrayBuffer) {\n      attributes.data = new Uint8Array(attributes.data);\n    }\n    if (attributes.data && !(attributes.data instanceof Uint8Array)) {\n      throw new Error(\"Expected data to be a string, Uint8Array or ArrayBuffer\");\n    }\n    if (attributes.reward == undefined) {\n      const length = attributes.data ? attributes.data.byteLength : 0;\n      transaction.reward = await this.transactions.getPrice(length, transaction.target);\n    }\n    // here we should call prepare chunk\n    transaction.data_root = \"\";\n    transaction.data_size = attributes.data ? attributes.data.byteLength.toString() : \"0\";\n    transaction.data = attributes.data || new Uint8Array(0);\n    const createdTransaction = new transaction_1.default(transaction);\n    await createdTransaction.getSignatureData();\n    return createdTransaction;\n  }\n  async createSiloTransaction(attributes, jwk, siloUri) {\n    const transaction = {};\n    Object.assign(transaction, attributes);\n    if (!attributes.data) {\n      throw new Error(`Silo transactions must have a 'data' value`);\n    }\n    if (!siloUri) {\n      throw new Error(`No Silo URI specified.`);\n    }\n    if (attributes.target || attributes.quantity) {\n      throw new Error(`Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.`);\n    }\n    if (attributes.owner == undefined) {\n      if (!jwk || !jwk.n) {\n        throw new Error(`A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.`);\n      }\n      transaction.owner = jwk.n;\n    }\n    if (attributes.last_tx == undefined) {\n      transaction.last_tx = await this.transactions.getTransactionAnchor();\n    }\n    const siloResource = await this.silo.parseUri(siloUri);\n    if (typeof attributes.data == \"string\") {\n      const encrypted = await this.crypto.encrypt(ArweaveUtils.stringToBuffer(attributes.data), siloResource.getEncryptionKey());\n      transaction.reward = await this.transactions.getPrice(encrypted.byteLength);\n      transaction.data = ArweaveUtils.bufferTob64Url(encrypted);\n    }\n    if (attributes.data instanceof Uint8Array) {\n      const encrypted = await this.crypto.encrypt(attributes.data, siloResource.getEncryptionKey());\n      transaction.reward = await this.transactions.getPrice(encrypted.byteLength);\n      transaction.data = ArweaveUtils.bufferTob64Url(encrypted);\n    }\n    const siloTransaction = new transaction_1.default(transaction);\n    siloTransaction.addTag(\"Silo-Name\", siloResource.getAccessKey());\n    siloTransaction.addTag(\"Silo-Version\", `0.1.0`);\n    return siloTransaction;\n  }\n  arql(query) {\n    return this.api.post(\"/arql\", query).then(response => response.data || []);\n  }\n}\nexports.default = Arweave;","map":{"version":3,"names":["Object","defineProperty","exports","value","ar_1","require","api_1","node_driver_1","network_1","transactions_1","wallets_1","transaction_1","ArweaveUtils","silo_1","chunks_1","blocks_1","Arweave","api","wallets","transactions","network","blocks","ar","silo","chunks","init","crypto","default","utils","constructor","apiConfig","getConfig","createTransaction","attributes","jwk","transaction","assign","data","target","quantity","Error","owner","undefined","n","last_tx","getTransactionAnchor","stringToBuffer","ArrayBuffer","Uint8Array","reward","length","byteLength","getPrice","data_root","data_size","toString","createdTransaction","getSignatureData","createSiloTransaction","siloUri","siloResource","parseUri","encrypted","encrypt","getEncryptionKey","bufferTob64Url","siloTransaction","addTag","getAccessKey","arql","query","post","then","response"],"sources":["C:/Users/adwai/perma-learn/frontend/node_modules/arweave/web/common.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ar_1 = require(\"./ar\");\nconst api_1 = require(\"./lib/api\");\nconst node_driver_1 = require(\"./lib/crypto/webcrypto-driver\");\nconst network_1 = require(\"./network\");\nconst transactions_1 = require(\"./transactions\");\nconst wallets_1 = require(\"./wallets\");\nconst transaction_1 = require(\"./lib/transaction\");\nconst ArweaveUtils = require(\"./lib/utils\");\nconst silo_1 = require(\"./silo\");\nconst chunks_1 = require(\"./chunks\");\nconst blocks_1 = require(\"./blocks\");\nclass Arweave {\n    api;\n    wallets;\n    transactions;\n    network;\n    blocks;\n    ar;\n    silo;\n    chunks;\n    static init;\n    static crypto = new node_driver_1.default();\n    static utils = ArweaveUtils;\n    constructor(apiConfig) {\n        this.api = new api_1.default(apiConfig);\n        this.wallets = new wallets_1.default(this.api, Arweave.crypto);\n        this.chunks = new chunks_1.default(this.api);\n        this.transactions = new transactions_1.default(this.api, Arweave.crypto, this.chunks);\n        this.silo = new silo_1.default(this.api, this.crypto, this.transactions);\n        this.network = new network_1.default(this.api);\n        this.blocks = new blocks_1.default(this.api, this.network);\n        this.ar = new ar_1.default();\n    }\n    /** @deprecated */\n    get crypto() {\n        return Arweave.crypto;\n    }\n    /** @deprecated */\n    get utils() {\n        return Arweave.utils;\n    }\n    getConfig() {\n        return {\n            api: this.api.getConfig(),\n            crypto: null,\n        };\n    }\n    async createTransaction(attributes, jwk) {\n        const transaction = {};\n        Object.assign(transaction, attributes);\n        if (!attributes.data && !(attributes.target && attributes.quantity)) {\n            throw new Error(`A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.`);\n        }\n        if (attributes.owner == undefined) {\n            if (jwk && jwk !== \"use_wallet\") {\n                transaction.owner = jwk.n;\n            }\n        }\n        if (attributes.last_tx == undefined) {\n            transaction.last_tx = await this.transactions.getTransactionAnchor();\n        }\n        if (typeof attributes.data === \"string\") {\n            attributes.data = ArweaveUtils.stringToBuffer(attributes.data);\n        }\n        if (attributes.data instanceof ArrayBuffer) {\n            attributes.data = new Uint8Array(attributes.data);\n        }\n        if (attributes.data && !(attributes.data instanceof Uint8Array)) {\n            throw new Error(\"Expected data to be a string, Uint8Array or ArrayBuffer\");\n        }\n        if (attributes.reward == undefined) {\n            const length = attributes.data ? attributes.data.byteLength : 0;\n            transaction.reward = await this.transactions.getPrice(length, transaction.target);\n        }\n        // here we should call prepare chunk\n        transaction.data_root = \"\";\n        transaction.data_size = attributes.data\n            ? attributes.data.byteLength.toString()\n            : \"0\";\n        transaction.data = attributes.data || new Uint8Array(0);\n        const createdTransaction = new transaction_1.default(transaction);\n        await createdTransaction.getSignatureData();\n        return createdTransaction;\n    }\n    async createSiloTransaction(attributes, jwk, siloUri) {\n        const transaction = {};\n        Object.assign(transaction, attributes);\n        if (!attributes.data) {\n            throw new Error(`Silo transactions must have a 'data' value`);\n        }\n        if (!siloUri) {\n            throw new Error(`No Silo URI specified.`);\n        }\n        if (attributes.target || attributes.quantity) {\n            throw new Error(`Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.`);\n        }\n        if (attributes.owner == undefined) {\n            if (!jwk || !jwk.n) {\n                throw new Error(`A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.`);\n            }\n            transaction.owner = jwk.n;\n        }\n        if (attributes.last_tx == undefined) {\n            transaction.last_tx = await this.transactions.getTransactionAnchor();\n        }\n        const siloResource = await this.silo.parseUri(siloUri);\n        if (typeof attributes.data == \"string\") {\n            const encrypted = await this.crypto.encrypt(ArweaveUtils.stringToBuffer(attributes.data), siloResource.getEncryptionKey());\n            transaction.reward = await this.transactions.getPrice(encrypted.byteLength);\n            transaction.data = ArweaveUtils.bufferTob64Url(encrypted);\n        }\n        if (attributes.data instanceof Uint8Array) {\n            const encrypted = await this.crypto.encrypt(attributes.data, siloResource.getEncryptionKey());\n            transaction.reward = await this.transactions.getPrice(encrypted.byteLength);\n            transaction.data = ArweaveUtils.bufferTob64Url(encrypted);\n        }\n        const siloTransaction = new transaction_1.default(transaction);\n        siloTransaction.addTag(\"Silo-Name\", siloResource.getAccessKey());\n        siloTransaction.addTag(\"Silo-Version\", `0.1.0`);\n        return siloTransaction;\n    }\n    arql(query) {\n        return this.api\n            .post(\"/arql\", query)\n            .then((response) => response.data || []);\n    }\n}\nexports.default = Arweave;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}